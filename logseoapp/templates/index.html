{% include "header.html" %}

<style>


#Rickshaw
#chart_container {
        position: relative;
        font-family: Arial, Helvetica, sans-serif;
}
#chart {
        position: relative;
        left: 0px;
}

		.rickshaw_graph .detail .x_label { display: none }
		.rickshaw_graph .detail .item { line-height: 1.4; padding: 0.5em }
		.detail_swatch { float: right; display: inline-block; width: 10px; height: 10px; margin: 0 4px 0 0 }
		.rickshaw_graph .detail .date { color: #a0a0a0 }
</style>
</head>
<body id="dt_example">

{% include "navigation.html" %}
{% include "subpage-sidenav.html" %}
 

<div class="span9">
    <div class="page-header">
        <h1>{{ week_ago }} to {{ latest_date }}</h1>
    </div>
    <div class="row-fluid">
        <div class="span3">
            {% block content %}
            <h2>New Kws</h2>
            <p>{{ p_count }} new kws</p>
                <div class="row-fluid">
        <div class="span12">
            <div id="chart_container">
                
                <div id="chart"></div>
            </div>
        </div>
    </div>
                <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="example">
                     {% for dict in phrases_new %}
                    <tr>
                        <td>{{ dict.phrase_id__phrase }}</td><td>{{ dict.phrase_id__first_seen|date:"m-d-y" }}</td>
                        <td>{{ dict.num_ips }}</td>
                    </tr>
                    {% endfor %}

                 </table>
              <a class="btn" href="#">View details &raquo;</a></p>
            </div><!--/span-->
            <div class="span3">
                <h2>Missing Kws</h2>
                <p>There were {{ wk_bf_last_cnt }} kws 2 wks ago, and {{ last_week_cnt }} kws last week</p>
                <p>below are 5 of the {{ unique_cnt }} kws that were missing from the prev wk</p>
                <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="example">
                   {% for dict in unique|slice:":5" %}
                    <tr>
                        <td>{{ dict.phrase }}</td><td></td>
                    </tr>
                    {% endfor %}

                 </table>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div><!--/span-->
            <div class="span3">
              <h2>Avg Rank</h2>
              <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="example">
                   {% for dict in last_week|slice:":5" %}
                    <tr>
                        <td>{{ dict.phrase }}</td><td></td>
                    </tr>
                    {% endfor %}
                {% endblock %} 
                </table>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div><!--/span-->
          </div><!--/row-->
          <div class="row-fluid">
            <div class="span3">
              <h2>New Questions</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div><!--/span-->
            <div class="span3">
              <h2>New Pages</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div><!--/span-->
            <div class="span3">
              <h2>Pages w kw delta</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div><!--/span-->
          </div><!--/row-->
        </div><!--/span-->
      </div><!--/row-->
    
<script>

var graph = new Rickshaw.Graph( {
        element: document.querySelector("#chart"),
        width: 150,
        height: 50,
        renderer: 'bar',
        series: [{
            data: {{new_kws_cnt|safe}},
            color: '#E9967A'
            }]
} );



graph.render();
var hoverDetail = new Rickshaw.Graph.HoverDetail( {
	graph: graph,
	formatter: function(series, x, y) {
		var date = '<span class="date">' + new Date(x * 1000).toUTCString() + '</span>';
		var swatch = '<span class="detail_swatch" style="background-color: ' + series.color + '"></span>';
		var content = swatch + "new kw count" + ": " + parseInt(y) + '<br>' + date;
		return content;
	}
} );
</script>

</body>
{% include "footer.py" %}



